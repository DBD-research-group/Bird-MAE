# @package _global_
defaults:
  - override /callbacks: default
  - override /data/dataset: HSN
  - override /data/loaders: esc50
  - override /data/transform: melbank_esc
  - override /logger: mlflow
  - override /module/network: vit_base_16
  - override /module/optimizer: adamw
  - override /module/scheduler: cosine
  - override /module/loss: binary_cross_entropy
  - override /module/metric: map
  - override /paths: workstation
  - override /trainer: single_gpu

seed: 42
start_time: ${now:%Y-%m-%d_%H%M%S}
task_name: "finetune_hsn"

train: true
test: true

logger:
  experiment_name: birdset_repr

data:
  loaders:
    train: 
      num_workers: 8
      batch_size: 48
      shuffle: true
  transform:
    mixup:
      alpha: 10.
      prob: 0.75
      num_mix: 3
      full_target: True
    mask2d: false
    mask_t_prob: 0.0
    mask_f_prob: 0.0
    timem: 96
    freqm: 24

    
trainer:
  max_epochs: 50
  limit_val_batches: 1.0
  check_val_every_n_epoch: 2
  gradient_clip_val: 0.3
  precision: 16-mixed


module:
  optimizer:
    target:
      #lr: 3e-4
      lr: 5e-5
      weight_decay: 1e-2
    extras:
      layer_decay: null

